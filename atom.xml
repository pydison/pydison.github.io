<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>pydison</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yulong.site/"/>
  <updated>2019-02-08T05:37:29.141Z</updated>
  <id>http://yulong.site/</id>
  
  <author>
    <name>pydison</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>搭建git服务器</title>
    <link href="http://yulong.site/2019/02/08/git-server/"/>
    <id>http://yulong.site/2019/02/08/git-server/</id>
    <published>2019-02-08T05:37:29.141Z</published>
    <updated>2019-02-08T05:37:29.141Z</updated>
    
    <content type="html"><![CDATA[<h2 id="配置服务端"><a href="#配置服务端" class="headerlink" title="配置服务端"></a>配置服务端</h2><p>安装git并建立git用户</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install git</span><br><span class="line">useradd git</span><br></pre></td></tr></table></figure><p>任选目录，建立git空仓库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd srv</span><br><span class="line">git init --bare tietest</span><br></pre></td></tr></table></figure><p>给目录配置权限</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R git:git tietest</span><br></pre></td></tr></table></figure><p>建立用户校验文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /home/git</span><br><span class="line">mkdir .ssh</span><br><span class="line">touch authorized_keys</span><br></pre></td></tr></table></figure><hr><h2 id="配置客户端"><a href="#配置客户端" class="headerlink" title="配置客户端"></a>配置客户端</h2><p>配置用户信息。如下，请替换成自己的名字和邮箱</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;pydison&quot;</span><br><span class="line">git config --global user.email pydison@gmail.com</span><br></pre></td></tr></table></figure><p>配置校验码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &apos;pydison@gmail.com&apos;</span><br></pre></td></tr></table></figure><p>一路回车就可以，看到类似如下返回，说明已经生成。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+--[ RSA 2048]----+</span><br><span class="line">|            o.Eo+|</span><br><span class="line">|           . . oo|</span><br><span class="line">|              . .|</span><br><span class="line">|             .o+ |</span><br><span class="line">|        S   .+..o|</span><br><span class="line">|       .   .= ...|</span><br><span class="line">|        . .+ o =.|</span><br><span class="line">|         .. o . =|</span><br><span class="line">|           .   . |</span><br><span class="line">+-----------------+</span><br></pre></td></tr></table></figure><hr><h2 id="写入用户校验码"><a href="#写入用户校验码" class="headerlink" title="写入用户校验码"></a>写入用户校验码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /root/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><p>将内容复制到服务端的<code>authorized_keys</code>文件中。如果有多个客户端，请一行一个。<br>之后就可以去客户端使用了。<br>比如服务器地址是<code>115.29.234.224</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@115.29.234.224:/srv/tietest</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;配置服务端&quot;&gt;&lt;a href=&quot;#配置服务端&quot; class=&quot;headerlink&quot; title=&quot;配置服务端&quot;&gt;&lt;/a&gt;配置服务端&lt;/h2&gt;&lt;p&gt;安装git并建立git用户&lt;/p&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;t
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>搭建svn服务器</title>
    <link href="http://yulong.site/2019/02/03/svn-server/"/>
    <id>http://yulong.site/2019/02/03/svn-server/</id>
    <published>2019-02-03T12:09:37.599Z</published>
    <updated>2019-02-03T12:09:37.599Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装svn"><a href="#安装svn" class="headerlink" title="安装svn"></a>安装svn</h2><p><code>yum install svn</code></p><hr><h2 id="创建svn版本库"><a href="#创建svn版本库" class="headerlink" title="创建svn版本库"></a>创建svn版本库</h2><p>这里，打算把所有的版本库都放到svns目录下，其中一个版本库叫tiejie</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /root/svns</span><br><span class="line">svnadmin create /root/svns/tiejie</span><br></pre></td></tr></table></figure><hr><h2 id="配置svn"><a href="#配置svn" class="headerlink" title="配置svn"></a>配置svn</h2><p>在版本库目录下，ls 可以看到生成了以下文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tiejie/</span><br><span class="line">├── conf</span><br><span class="line">│   ├── authz         ：权限配置文件</span><br><span class="line">│   ├── passwd        ：密码配置文件</span><br><span class="line">│   └── svnserve.conf ：svn服务配置文件</span><br><span class="line">├── db</span><br><span class="line">以下略</span><br></pre></td></tr></table></figure><p>authz文件配置示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[groups]</span><br><span class="line">admins = harry,sally             #admins组</span><br><span class="line">normals1 = harry,sally,&amp;joe      #normals1组</span><br><span class="line">normals2 = wangfugui,zhangdabing</span><br><span class="line"></span><br><span class="line">[/]                              #svn服务根目录，这里对应/root/svns/</span><br><span class="line">harry = rw                       #对用户设置权限</span><br><span class="line">@admins = rw                     #对组设置权限</span><br><span class="line">* =                              #默认权限</span><br><span class="line"></span><br><span class="line">[tiejie:/]                       #单个版本库目录，这里对应 /root/svns/tiejie/</span><br><span class="line">@normals1 = rw                   #组权限</span><br><span class="line">* = r</span><br></pre></td></tr></table></figure><p>passwd文件配置示例</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[users]</span><br><span class="line">wangfugui = ligoudan</span><br></pre></td></tr></table></figure><p>svnserve.conf 配置示例<br>基本上把双列注释的井号去掉就差不多了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[general]</span><br><span class="line">anon-access = read</span><br><span class="line">auth-access = write</span><br><span class="line">password-db = passwd</span><br><span class="line">authz-db = authz</span><br></pre></td></tr></table></figure><hr><h2 id="启动svn服务"><a href="#启动svn服务" class="headerlink" title="启动svn服务"></a>启动svn服务</h2><p><code>svnserve -d -r /root/svns</code> #-d指后台运行,-r指定目录</p><p>停止服务的话，杀掉进程就可以了。</p><hr><h2 id="客户端连接此svn服务器"><a href="#客户端连接此svn服务器" class="headerlink" title="客户端连接此svn服务器"></a>客户端连接此svn服务器</h2><p>比如这台服务器网址是<code>115.28.143.71</code>，那么我在客户端上执行的命令是<code>svn co svn://115.28.143.71/tiejie</code>.</p><p>在本文配置中，陌生用户有读权限，所以很容易就check到本地了。<br>然后提交新版本的时候，就需要确认用户了。这里我们以wangfugui这个用户为例。</p><p><img src="http://pydison.oss-cn-hangzhou.aliyuncs.com/pics/svn.png" alt="svn连接"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;安装svn&quot;&gt;&lt;a href=&quot;#安装svn&quot; class=&quot;headerlink&quot; title=&quot;安装svn&quot;&gt;&lt;/a&gt;安装svn&lt;/h2&gt;&lt;p&gt;&lt;code&gt;yum install svn&lt;/code&gt;&lt;/p&gt;&lt;hr&gt;&lt;h2 id=&quot;创建svn版本库&quot;&gt;&lt;a h
      
    
    </summary>
    
    
  </entry>
  
</feed>
